@charset "utf-8";

/* Typography-forward refresh (Practical Typography-ish):
   - Serif stack: Charter → Source Serif → Times New Roman → serif
   - Sans accent: Source Sans Pro for structure (tables, meta, markers)
   - Responsive body size + readable leading
   - Constrained measure (~65ch)
   - Paragraph spacing (no first-line indents)
   - Vertical rhythm tokens (rhythm-first spacing)
*/

:root{
  --text-size: clamp(16px, calc(1.2vmin + 12px), 20px);
  --line: 1.42;
  --measure: 65ch;
  --pad-x: clamp(16px, 3vw, 32px);
  --pad-y: clamp(24px, 4vw, 50px);

  /* Base paragraph gap (kept for compatibility) */
  --gap: 0.9em;

  /* Vertical rhythm tokens (derive everything from one unit) */
  --rh: var(--gap);
  --rh-0: 0;
  --rh-1: calc(var(--rh) * 0.5);   /* tight */
  --rh-2: var(--rh);               /* normal (paragraph) */
  --rh-3: calc(var(--rh) * 1.5);   /* roomy */
  --rh-4: calc(var(--rh) * 2.2);   /* section break */

  /* Accent sans */
  --sans: "Source Sans Pro", -apple-system, BlinkMacSystemFont,
          "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;

  /* existing palette preserved */
  --c-text: #555;
  --c-text-dark: #bbb;
  --c-bg-dark: #000;

  --c-heading: #333;
  --c-heading-dark: #ddd;

  --c-accent: #f28b10;
  --c-accent-dark: #f1ab5d;

  --c-link: #084769;
  --c-link-dark: #129fec;
  --c-link-hover: #032d44;
  --c-link-hover-dark: #0873ad;

  --c-meta: #999;
}

body{
  margin: 0;
  padding: var(--pad-y) 0;
  font-size: var(--text-size);
  font-family: Charter, "Source Serif", "Times New Roman", Times, serif;
  font-style: normal;
  font-weight: 400;
  color: var(--c-text);
  line-height: var(--line);

  font-kerning: normal;
  font-feature-settings: "kern" 1, "liga" 1;
  text-rendering: optimizeLegibility;

  text-align: left;
  hyphens: auto;
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

@media (prefers-color-scheme: dark){
  body{
    color: var(--c-text-dark);
    background-color: var(--c-bg-dark);
  }
}

/* Layout wrapper */
div.grid{
  margin: 0 auto;
  display: block;
  padding-bottom: calc(var(--rh-3));
  min-height: 100%;
  width: 100%;
}

/* Main content block: measured, responsive, centered on page */
div{
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;

  margin: 0 auto;
  padding: 0 var(--pad-x);

  max-width: var(--measure);
  width: 100%;

  text-align: left;
  white-space: normal;
  vertical-align: top;
}

/* Horizontal rule / divider */
.rule{
  color: var(--c-accent);
  border: none;
  border-bottom: 1px solid currentColor;
  margin: var(--rh-4) 0;
}

@media (prefers-color-scheme: dark){
  .rule{ color: var(--c-accent-dark); }
}

/* Headings: smaller, calmer, spacing does the work */
h1, h2, h3, h4, h5, h6{
  hyphens: none;
  -webkit-hyphens: none;
  -ms-hyphens: none;
  word-break: normal;
  text-wrap: balance;
}
h1{
  font-size: clamp(1.75rem, calc(1.6vw + 1.15rem), 2.35rem);
  line-height: 1.15;
  text-align: left;
  font-weight: 600;
  font-style: normal;
  color: var(--c-heading);
  margin: 0 0 var(--rh-2) 0;
  letter-spacing: -0.01em;
}

@media (prefers-color-scheme: dark){
  h1{ color: var(--c-heading-dark); }
}

.intro h1{ font-weight: 400; }

h2{
  font-size: clamp(1.2rem, calc(0.9vw + 1.0rem), 1.55rem);
  line-height: 1.25;
  margin: var(--rh-4) 0 var(--rh-2) 0;
  font-weight: 600;
  color: var(--c-heading);
  letter-spacing: -0.005em;
}

@media (prefers-color-scheme: dark){
  h2{ color: var(--c-heading-dark); }
}

/* Context-sensitive breathing room for h2 */
p + h2,
ul + h2,
ol + h2,
table + h2,
blockquote + h2{
  margin-top: var(--rh-4);
}

/* If h2 follows another heading, keep it tighter */
h1 + h2{
  margin-top: var(--rh-3);
}

/* Copy rhythm */
p, li{
  font-size: 1em;
  line-height: var(--line);
  margin: 0 0 var(--rh-2) 0;
  font-weight: 400;
  font-style: normal;
}

/* Better “hug” between headings and first paragraph */
h1 + p, h2 + p{ margin-top: 0; }

/* Lists: keep prose serif; make ordered markers sans */
ol{
  margin: 0 0 var(--rh-2) 0;
  padding-left: 1.25em; /* modest, avoids cramped markers */
}

ul{
  margin: 0 0 var(--rh-2) 0;
  padding-left: 1.25em;
}

ol li::marker{
  font-family: var(--sans);
  font-weight: 600;
}

/* Blockquotes: indentation only (no border), rhythm handled like normal text */
blockquote{
  quotes: "";
  margin: 0 0 var(--rh-2) 0;
  padding-left: 1.5em;
  text-indent: 0;
}

blockquote p{
  font-style: italic;
  margin: 0 0 var(--rh-2) 0;
  padding: 0;
}

blockquote p:last-child{
  margin-bottom: 0;
}

blockquote i,
blockquote em{ font-style: normal; }

/* Meta text: sans accent */
p.meta{
  font-family: var(--sans);
  font-size: 0.78em;
  line-height: 1.6;
  letter-spacing: 0.12em;
  margin-top: var(--rh-2);
  text-transform: uppercase;
  color: var(--c-meta);
  font-weight: 500;
}

@media (prefers-color-scheme: dark){
  p.meta{ color: var(--c-meta); }
}

/* Unsupervised marker preserved */
.unsupervised{
  font-weight: 400;
  text-align: center;
  text-transform: uppercase;
  letter-spacing: 0.2em;
}

.unsupervised:before,
.unsupervised:after{
  content: "\2015";
  position: relative;
  top: 0;
  right: 0;
  left: 0;
  line-height: 0;
  text-align: center;
}

/* Links + hover + borders: keep exactly your colors/behavior */
a{
  color: var(--c-link);
  text-decoration: none;
}

@media (prefers-color-scheme: dark){
  a{ color: var(--c-link-dark); }
}

h1 a, .h2 a, .unsupervised a{ color: var(--c-heading); }

@media (prefers-color-scheme: dark){
  h1 a, .h2 a, .unsupervised a{ color: var(--c-heading-dark); }
}

a:hover{ color: var(--c-link-hover); }

@media (prefers-color-scheme: dark){
  a:hover{ color: var(--c-link-hover-dark); }
}

h1 a:hover, h1 a.permalink:hover{ color: var(--c-link); }

@media (prefers-color-scheme: dark){
  h1 a:hover, h1 a.permalink:hover{ color: var(--c-link-dark); }
}

.unsupervised a, .post_content h1 a{
  color: var(--c-text);
  border-bottom: 0px;
}

@media (prefers-color-scheme: dark){
  .unsupervised a, .post_content h1 a{ color: var(--c-text-dark); }
}

.unsupervised a:hover, .post_content h1 a:hover{
  color: var(--c-link);
  border-bottom: 1px dotted var(--c-link);
}

@media (prefers-color-scheme: dark){
  .unsupervised a:hover, .post_content h1 a:hover{
    color: var(--c-link-dark);
    border-bottom-color: var(--c-link-dark);
  }
}

.post_content a, .info a, .meta a, .sidebar a{
  border-bottom: 1px dotted var(--c-link);
}

@media (prefers-color-scheme: dark){
  .post_content a, .info a, .meta a, .sidebar a{
    border-bottom-color: var(--c-link-dark);
  }
}

.post_content a:hover, .info a:hover, .meta a:hover, .sidebar a:hover{
  border-bottom: 1px solid var(--c-link-hover);
}

@media (prefers-color-scheme: dark){
  .post_content a:hover, .info a:hover, .meta a:hover, .sidebar a:hover{
    border-bottom-color: var(--c-link-hover-dark);
  }
}

/* Small caps / numbers / abbr / small: sans accent */
small, abbr{
  font-family: var(--sans);
  font-size: 0.78em;
  line-height: 1.6;
  letter-spacing: 0.1em;
}

.caps, .numbers{
  font-family: var(--sans);
  font-size: 0.78em;
  line-height: 1.6;
  letter-spacing: 0.1em;
  text-transform: uppercase;
}

/* Code: keep monospace */
code, kbd, pre, samp{
  font-family: Menlo, Monaco, Courier, monospace;
  font-weight: 400;
  font-size: 0.95em;
}

sup, sub{
  vertical-align: baseline;
  position: relative;
  top: -0.4em;
  font-size: 0.75em;
}
sub{ top: 0.4em; }

strong, b{ font-weight: 700; }
em, i{ font-style: italic; }
.meta-ital{ text-transform: none; font-style: italic; }

.count{
  font-size: 1em;
  line-height: var(--line);
}

/* Pagination: two-ended nav (iOS-friendly, no stray dividers) */
.pagination{
  margin: var(--rh-4) 0 0;
  padding: 0;
  text-align: left;
  font-family: var(--sans);
  font-size: 0.8em;       /* between footer (0.75) and body */
  line-height: 1.4;
  color: var(--c-meta);
}

.pagination ul{
  margin: 0;
  padding: 0;
  list-style: none;

  display: flex;
  align-items: baseline;
  gap: 1rem;
}

.pagination li{
  display: block;
  padding: 0;
}

.pagination a{
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: inherit;
}

/* Newer left, Older right */
.pagination__prev{ margin-right: auto; }
.pagination__next{ margin-left: auto; }

/* Optional subtle divider only when both exist */
.pagination__next{
  padding-left: 1rem;
  border-left: 1px solid var(--c-meta);
}

/* Make it feel like navigation/meta, not body copy */
.pagination a{
  font-family: var(--sans);
  font-size: 0.85em;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  border-bottom: 0;
}

.comment-form-elements{ list-style-type: none; margin: 0; }
.comment-form-elements li{ margin-bottom: var(--rh-2); }

/* Tables: rhythm + subtle texture (Markdown-friendly: no thead required) */
table{
  width: 100%;
  margin: var(--rh-2) 0;     /* left-aligned in column */
  border-collapse: collapse;
  table-layout: auto;
  font-size: 0.95em;
  line-height: 1.3;
}

th, td{
  padding: calc(var(--rh) * 0.35) 1em;
  vertical-align: baseline;
}

th:first-child, td:first-child{ padding-left: 0; }
th:last-child,  td:last-child { padding-right: 0; }

/* Header row rule (works for Markdown-generated tables) */
table tr:first-child th{
  font-family: var(--sans);
  border-bottom: 1px solid var(--c-accent);
  padding-bottom: calc(var(--rh) * 0.35);
  font-weight: 400;          /* medium-bold, not shouty */
  letter-spacing: 0;         /* calmer than UI-style spacing */
}

img{ max-width: 100%; height: auto; }
iframe{ width: 100% !important; }

::selection{ background: var(--c-accent); }
@media (prefers-color-scheme: dark){ ::selection{ background: var(--c-accent-dark); } }

::-moz-selection{ background: var(--c-accent); }
@media (prefers-color-scheme: dark){ ::-moz-selection{ background: var(--c-accent-dark); } }

/* Mobile: measure + padding already responsive; just tighten h1 a bit */
@media only screen and (max-width: 480px){
  h1{ line-height: 1.12; }
}

/* Footer: treat as colophon/meta, not body copy */
.footer{
  margin-top: var(--rh-4);
  padding-top: var(--rh-2);

  font-family: var(--sans);
  font-size: 0.75em;
  line-height: 1.35;
  color: var(--c-meta);
}

.footer p{
  margin: 0 0 var(--rh-1) 0;
}

.footer p:last-child{
  margin-bottom: 0;
}

/* Keep footer links subtle */
.footer a{
  color: inherit;
  border-bottom: 1px dotted currentColor;
}

.footer a:hover{
  color: var(--c-link);
  border-bottom-style: solid;
}

@media (prefers-color-scheme: dark){
  .footer a:hover{ color: var(--c-link-dark); }
}